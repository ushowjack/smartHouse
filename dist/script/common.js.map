{"version":3,"sources":["common.js"],"names":["GetDate","now","Date","getFullYear","min","year","getMonth","getDate","hours","Timestamp","url","getTimestamp","indexOf","substring","switchClassFn","el","className","classNameAll","value","txt","placeholder","replace","nameIndex","RegExp","split","join","Array","prototype","forEach","fn","context","this","length","k","Object","hasOwnProperty","call","map","arr","push","filter","some","passed","every","reduce","callback","initialValue","previous","from","arrayLike","slice","CookieUtil","get","name","cookieName","encodeURIComponent","cookieStart","document","cookie","cookieEnd","cookieValue","decodeURIComponent","set","_ref","expires","path","domain","secure","cookieText","toGMTString","unset","_ref2","FormUtil","placeholderOff","ev","target","val","getAttribute","setAttribute","placeholderOn","setPlaceholder","onfocus","onblur","placeholderPolyfill","elemName","css","arguments","undefined","position","display","top","left","z-index","$","each","index","element","find","attr","append","focus","text","blur","createXHR","XMLHttpRequest","ActiveXObject","activeXString","versions","i","len","ex","Error","addURLParam","serialize","serializeInput","elArr","msg","querySelector"],"mappings":"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","file":"common.js","sourcesContent":["/**\n * User: Ushow Jack/youshoujie@tomee.cn\n * Date: 2017/4/11\n * Time: 16:04\n */\n\"use strict\"\n/**\n * 处理Array.prototype兼容ie6~ie8问题\n */\nif (typeof Array.prototype.forEach !== \"function\") {\n    Array.prototype.forEach = function (fn, context) {\n        for (let k = 0, length = this.length; k < length; k++) {\n            if (typeof fn === \"function\" && Object.prototype.hasOwnProperty.call(this, k)) {\n                fn.call(context, this[k], k, this);\n            }\n        }\n    };\n}\n\nif (typeof Array.prototype.map !== \"function\") {\n    Array.prototype.map = function (fn, context) {\n        let arr = [];\n        if (typeof fn === \"function\") {\n            for (let k = 0, length = this.length; k < length; k++) {\n                arr.push(fn.call(context, this[k], k, this));\n            }\n        }\n        return arr;\n    };\n}\n\nif (typeof Array.prototype.filter !== \"function\") {\n    Array.prototype.filter = function (fn, context) {\n        let arr = [];\n        if (typeof fn === \"function\") {\n            for (let k = 0, length = this.length; k < length; k++) {\n                fn.call(context, this[k], k, this) && arr.push(this[k]);\n            }\n        }\n        return arr;\n    };\n}\n\nif (typeof Array.prototype.some !== \"function\") {\n    Array.prototype.some = function (fn, context) {\n        let passed = false;\n        if (typeof fn === \"function\") {\n            for (let k = 0, length = this.length; k < length; k++) {\n                if (passed === true) break;\n                passed = !!fn.call(context, this[k], k, this);\n            }\n        }\n        return passed;\n    };\n}\n\nif (typeof Array.prototype.every !== \"function\") {\n    Array.prototype.every = function (fn, context) {\n        let passed = true;\n        if (typeof fn === \"function\") {\n            for (let k = 0, length = this.length; k < length; k++) {\n                if (passed === false) break;\n                passed = !!fn.call(context, this[k], k, this);\n            }\n        }\n        return passed;\n    };\n}\nif (typeof Array.prototype.reduce !== \"function\") {\n    Array.prototype.reduce = function (callback, initialValue) {\n        let previous = initialValue, k = 0, length = this.length;\n        if (typeof initialValue === \"undefined\") {\n            previous = this[0];\n            k = 1;\n        }\n\n        if (typeof callback === \"function\") {\n            for (k; k < length; k++) {\n                this.hasOwnProperty(k) && (previous = callback(previous, this[k], k, this));\n            }\n        }\n        return previous;\n    };\n}\n\nif (typeof Array.from !== \"function\") {\n    Array.from = function (arrayLike) {\n        let Arr = Array.prototype.slice.call(arrayLike);\n        return Arr;\n    }\n}\n\n\n/**\n * 获取当前时间方法\n * @returns {string}\n * @constructor\n */\nfunction GetDate() {\n    let now = new Date();\n    let year = now.getFullYear();\n    let month = now.getMonth() + 1;\n    let day = now.getDate();\n    let hours = now.getHours();\n    let min = now.getMinutes();\n    let sec = now.getSeconds();\n    let time = `${year}-${month}-${day} ${hours}:${min}:${sec}`;\n    return time;\n}\n/**\n * 增加时间戳，解决浏览器缓存\n * @param url [string]\n * @returns {url}\n */\n/**\n * version: 1.1  ushow jack\n *  to resolve the url add new timestamp but not delete the old timestamp\n */\nfunction Timestamp(url) {\n\n    let getTimestamp = GetDate();\n    if (url.indexOf(\"timestamp\") > -1) {\n        url = url.substring(0, url.indexOf(\"timestamp\") - 1);\n    }\n    if (url.indexOf(\"?\") > -1) {\n        url = `${url}&timestamp=${getTimestamp}`;\n    } else {\n        url = `${url}?timestamp=${getTimestamp}`;\n    }\n    return encodeURI(url);\n}\n\n\n/**\n *  * 来源：JavaScript高级程序设计，由Ushow改写\n * @type {{get: CookieUtil.get, set: CookieUtil.set, unset: CookieUtil.unset}}\n * @version 1.0\n */\nlet CookieUtil = {\n    /**\n     * 获取cookie值\n     * @param name {string}\n     * @returns {strung} 返回对应的值\n     */\n    get: function (name) {\n        let cookieName = encodeURIComponent(name) + \"=\",\n            cookieStart = document.cookie.indexOf(cookieName),\n            cookieValue = null;\n\n        if (cookieStart > -1) {\n            let cookieEnd = document.cookie.indexOf(\";\", cookieStart);\n            if (cookieEnd === -1) {\n                cookieEnd = document.cookie.length;\n            }\n            cookieValue = decodeURIComponent(document.cookie.substring(cookieStart + cookieName.length, cookieEnd));\n        }\n\n        return cookieValue;\n    },\n    /**\n     * 写入cookie方法\n     * @param name{string}          键名\n     * @param value{string/num}     键值\n     * @param expires{int}          有效天数（默认浏览器关闭后清除）\n     * @param path{string}          路径\n     * @param domain{string}        域名（默认当前域名）\n     * @param secure{boolean}       安全\n     */\n    set: function ({name, value, expires, path, domain, secure}) {\n        let cookieText = encodeURIComponent(name) + \"=\" + encodeURIComponent(value);\n        if (expires) {\n            let now = Date.now();\n            expires = new Date(now + expires * 86400000);\n        }\n        if (expires instanceof Date) {\n            cookieText += \"; expires=\" + expires.toGMTString();\n        }\n        if (path) {\n            cookieText += \"; path=\" + path;\n        }\n        if (domain) {\n            cookieText += \"; domain=\" + domain;\n        }\n        if (secure) {\n            cookieText += \"; secure\";\n        }\n        document.cookie = cookieText;\n    },\n    /**\n     * 覆盖cookie函数\n     * @param name{string}          键名\n     * @param path{string}          路径\n     * @param domain{string}        域名（默认当前域名）\n     * @param secure{boolean}       安全\n     */\n    unset: function ({name, path, domain, secure}) {\n        this.set({name: name, value: \"\", path: path, domain: domain, secure: secure});\n    }\n}\n\n/**\n * 表单方法集合\n * @type {{placeholderOff: FormUtil.placeholderOff, placeholderOn: FormUtil.placeholderOn, setPlaceholder: FormUtil.setPlaceholder, placeholderPolyfill: FormUtil.placeholderPolyfill}}\n */\nlet FormUtil = {\n    /**\n     * 用于绑定input的placeholder事件\n     * @example inputElem.forEach(FormUtil.setPlaceholder)\n     * @param el {DOM对象}\n     * @version 1.0\n     */\n    placeholderOff: function (ev) {\n        ev.target.val = ev.target.getAttribute(\"placeholder\");\n        ev.target.setAttribute(\"placeholder\", \"\");\n    },\n    placeholderOn: function (ev) {\n        ev.target.setAttribute(\"placeholder\", ev.target.val);\n    },\n    setPlaceholder: function (el) {\n        el.onfocus = FormUtil.placeholderOff;\n        el.onblur = FormUtil.placeholderOn;\n    },\n    /**\n     * 解决IE9不能使用placeholder的问题，输入想使用placeholder的选择器\n     * 设置对应input的标签的placeholder的值即可\n     * @depend  jQuery\n     * @example placeholderFn(\".input-item\");\n     * @param elemName\n     * @param css\n     */\n    placeholderPolyfill: function (elemName, css = {\n        \"color\": \"rgb(204, 204, 204)\",\n        \"line-height\": \"40px\",\n        \"font-size\": \"14px\",\n        \"position\": \"absolute\",\n        \"display\": \"inline\",\n        \"top\": 0,\n        \"left\": 50,\n        \"z-index\": 2\n    }) {\n        let inputItem = $(elemName);\n        inputItem.each(function (index, element) {\n            let placeholder = $(element).find(\"input\").attr(\"placeholder\");\n            let txt = $(`<txt>${placeholder}</txt>`);\n            txt.css(css);\n            $(element).append(txt);\n            $(element).find(\"input\").focus(function () {\n                txt.text(\"\");\n            });\n            $(element).find(\"input\").blur(function () {\n\n                if (!this.value) {\n                    txt.text(placeholder);\n                }\n            });\n        });\n    }\n}\n\n\n/**\n * 给指定单一元素添加类名的开关\n * @param el\n * @param className\n */\nfunction switchClassFn(el, className) {\n    let classNameAll = el.className;\n    let nameIndex = classNameAll.indexOf(` ${className}`);\n    if (nameIndex > -1) {\n        classNameAll = classNameAll.replace(` ${className}`, \"\");\n    } else {\n        classNameAll += ` ${className}`;\n    }\n    return el.className = classNameAll;\n}\n\n/**\n * 清除类名\n * @param el\n * @param className\n */\nfunction removeClass(el, className) {\n    if (el.classList) {\n        el.classList.remove(className);\n    } else {\n        el.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n    }\n\n}\n\n//todo 写一个事件委托的函数\n//let DOM = {\n//    eventDepute,\n//};\n\n/**\n * * 兼容到IE7\n * @type {{createXHR: (()), addURLParam: ((url, name?, value?))}}\n */\nlet AJAXFn = {\n    createXHR(){\n        if (typeof XMLHttpRequest !== \"undefined\") {\n            return new XMLHttpRequest();\n        } else if (typeof ActiveXObject !== \"undefined\") {\n            if (typeof createXHR.activeXString !== \"undefined\") {\n                let versions = [\n                        'Msxml2.XMLHTTP.5.0',\n                        'Msxml2.XMLHTTP.4.0',\n                        'Msxml2.XMLHTTP.3.0',\n                        'Msxml2.XMLHTTP',\n                        'Microsoft.XMLHTTP'],\n                    i,\n                    len;\n                for (i = 0, len = versions.length; i < len; i++) {\n                    try {\n                        new ActiveXObject(versions[i]);\n                        createXHR.activeXString = versions[i];\n                        break;\n                    } catch (ex) {\n                        //    跳过\n                    }\n                }\n            }\n            return new ActiveXObject(createXHR.activeXString);\n        } else {\n            throw new Error(\"你的浏览器版本太旧，请及时更新！\")\n        }\n\n    },\n    addURLParam(url, name, value){\n        url += (url.indexOf(\"?\") == -1 ? \"?\" : \"&\");\n        url += `${encodeURIComponent(name)}=${encodeURIComponent(value)}`;\n        return url;\n    }\n}\n\nlet serialize = {\n    serializeInput(elArr){\n        let len = elArr.length,\n            msg = [],\n            i;\n        for (i = 0; i < len; i++) {\n            msg.push(`${encodeURIComponent(elArr[i].name)}=${encodeURIComponent(elArr[i].value)}`);\n        }\n        return msg.join(\"&\");\n    },\n    checkForm(){\n        let msg = document.querySelector(\".forget>span\");\n        if (msg.className === \"warn\"){\n            return false;\n        }\n        return true;\n    }\n}\n\n\n"]}