{"version":3,"sources":["common.js"],"names":["GetDate","now","Date","getFullYear","min","year","getMonth","getDate","hours","Timestamp","url","getTimestamp","indexOf","substring","switchClassFn","el","className","classNameAll","value","txt","placeholder","replace","nameIndex","RegExp","split","join","Array","prototype","forEach","fn","context","this","length","k","Object","hasOwnProperty","call","map","arr","push","filter","some","passed","every","reduce","callback","initialValue","previous","from","arrayLike","slice","CookieUtil","get","name","cookieName","encodeURIComponent","cookieStart","document","cookie","cookieEnd","cookieValue","decodeURIComponent","set","_ref","expires","path","domain","secure","cookieText","toGMTString","unset","_ref2","FormUtil","placeholderOff","ev","target","val","getAttribute","setAttribute","placeholderOn","setPlaceholder","onfocus","onblur","placeholderPolyfill","elemName","css","arguments","undefined","position","display","top","left","z-index","$","each","index","element","find","attr","append","focus","text","blur","createXHR","XMLHttpRequest","ActiveXObject","activeXString","versions","i","len","ex","Error","addURLParam","serialize","serializeInput","elArr","msg","querySelector"],"mappings":"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","file":"common.js","sourcesContent":["/**\r\n * User: Ushow Jack/youshoujie@tomee.cn\r\n * Date: 2017/4/11\r\n * Time: 16:04\r\n */\r\n\"use strict\"\r\n/**\r\n * 处理Array.prototype兼容ie6~ie8问题\r\n */\r\nif (typeof Array.prototype.forEach !== \"function\") {\r\n    Array.prototype.forEach = function (fn, context) {\r\n        for (let k = 0, length = this.length; k < length; k++) {\r\n            if (typeof fn === \"function\" && Object.prototype.hasOwnProperty.call(this, k)) {\r\n                fn.call(context, this[k], k, this);\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nif (typeof Array.prototype.map !== \"function\") {\r\n    Array.prototype.map = function (fn, context) {\r\n        let arr = [];\r\n        if (typeof fn === \"function\") {\r\n            for (let k = 0, length = this.length; k < length; k++) {\r\n                arr.push(fn.call(context, this[k], k, this));\r\n            }\r\n        }\r\n        return arr;\r\n    };\r\n}\r\n\r\nif (typeof Array.prototype.filter !== \"function\") {\r\n    Array.prototype.filter = function (fn, context) {\r\n        let arr = [];\r\n        if (typeof fn === \"function\") {\r\n            for (let k = 0, length = this.length; k < length; k++) {\r\n                fn.call(context, this[k], k, this) && arr.push(this[k]);\r\n            }\r\n        }\r\n        return arr;\r\n    };\r\n}\r\n\r\nif (typeof Array.prototype.some !== \"function\") {\r\n    Array.prototype.some = function (fn, context) {\r\n        let passed = false;\r\n        if (typeof fn === \"function\") {\r\n            for (let k = 0, length = this.length; k < length; k++) {\r\n                if (passed === true) break;\r\n                passed = !!fn.call(context, this[k], k, this);\r\n            }\r\n        }\r\n        return passed;\r\n    };\r\n}\r\n\r\nif (typeof Array.prototype.every !== \"function\") {\r\n    Array.prototype.every = function (fn, context) {\r\n        let passed = true;\r\n        if (typeof fn === \"function\") {\r\n            for (let k = 0, length = this.length; k < length; k++) {\r\n                if (passed === false) break;\r\n                passed = !!fn.call(context, this[k], k, this);\r\n            }\r\n        }\r\n        return passed;\r\n    };\r\n}\r\nif (typeof Array.prototype.reduce !== \"function\") {\r\n    Array.prototype.reduce = function (callback, initialValue) {\r\n        let previous = initialValue, k = 0, length = this.length;\r\n        if (typeof initialValue === \"undefined\") {\r\n            previous = this[0];\r\n            k = 1;\r\n        }\r\n\r\n        if (typeof callback === \"function\") {\r\n            for (k; k < length; k++) {\r\n                this.hasOwnProperty(k) && (previous = callback(previous, this[k], k, this));\r\n            }\r\n        }\r\n        return previous;\r\n    };\r\n}\r\n\r\nif (typeof Array.from !== \"function\") {\r\n    Array.from = function (arrayLike) {\r\n        let Arr = Array.prototype.slice.call(arrayLike);\r\n        return Arr;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * 获取当前时间方法\r\n * @returns {string}\r\n * @constructor\r\n */\r\nfunction GetDate() {\r\n    let now = new Date();\r\n    let year = now.getFullYear();\r\n    let month = now.getMonth() + 1;\r\n    let day = now.getDate();\r\n    let hours = now.getHours();\r\n    let min = now.getMinutes();\r\n    let sec = now.getSeconds();\r\n    let time = `${year}-${month}-${day} ${hours}:${min}:${sec}`;\r\n    return time;\r\n}\r\n/**\r\n * 增加时间戳，解决浏览器缓存\r\n * @param url [string]\r\n * @returns {url}\r\n */\r\n/**\r\n * version: 1.1  ushow jack\r\n *  to resolve the url add new timestamp but not delete the old timestamp\r\n */\r\nfunction Timestamp(url) {\r\n\r\n    let getTimestamp = GetDate();\r\n    if (url.indexOf(\"timestamp\") > -1) {\r\n        url = url.substring(0, url.indexOf(\"timestamp\") - 1);\r\n    }\r\n    if (url.indexOf(\"?\") > -1) {\r\n        url = `${url}&timestamp=${getTimestamp}`;\r\n    } else {\r\n        url = `${url}?timestamp=${getTimestamp}`;\r\n    }\r\n    return encodeURI(url);\r\n}\r\n\r\n\r\n/**\r\n *  * 来源：JavaScript高级程序设计，由Ushow改写\r\n * @type {{get: CookieUtil.get, set: CookieUtil.set, unset: CookieUtil.unset}}\r\n * @version 1.0\r\n */\r\nlet CookieUtil = {\r\n    /**\r\n     * 获取cookie值\r\n     * @param name {string}\r\n     * @returns {strung} 返回对应的值\r\n     */\r\n    get: function (name) {\r\n        let cookieName = encodeURIComponent(name) + \"=\",\r\n            cookieStart = document.cookie.indexOf(cookieName),\r\n            cookieValue = null;\r\n\r\n        if (cookieStart > -1) {\r\n            let cookieEnd = document.cookie.indexOf(\";\", cookieStart);\r\n            if (cookieEnd === -1) {\r\n                cookieEnd = document.cookie.length;\r\n            }\r\n            cookieValue = decodeURIComponent(document.cookie.substring(cookieStart + cookieName.length, cookieEnd));\r\n        }\r\n\r\n        return cookieValue;\r\n    },\r\n    /**\r\n     * 写入cookie方法\r\n     * @param name{string}          键名\r\n     * @param value{string/num}     键值\r\n     * @param expires{int}          有效天数（默认浏览器关闭后清除）\r\n     * @param path{string}          路径\r\n     * @param domain{string}        域名（默认当前域名）\r\n     * @param secure{boolean}       安全\r\n     */\r\n    set: function ({name, value, expires, path, domain, secure}) {\r\n        let cookieText = encodeURIComponent(name) + \"=\" + encodeURIComponent(value);\r\n        if (expires) {\r\n            let now = Date.now();\r\n            expires = new Date(now + expires * 86400000);\r\n        }\r\n        if (expires instanceof Date) {\r\n            cookieText += \"; expires=\" + expires.toGMTString();\r\n        }\r\n        if (path) {\r\n            cookieText += \"; path=\" + path;\r\n        }\r\n        if (domain) {\r\n            cookieText += \"; domain=\" + domain;\r\n        }\r\n        if (secure) {\r\n            cookieText += \"; secure\";\r\n        }\r\n        document.cookie = cookieText;\r\n    },\r\n    /**\r\n     * 覆盖cookie函数\r\n     * @param name{string}          键名\r\n     * @param path{string}          路径\r\n     * @param domain{string}        域名（默认当前域名）\r\n     * @param secure{boolean}       安全\r\n     */\r\n    unset: function ({name, path, domain, secure}) {\r\n        this.set({name: name, value: \"\", path: path, domain: domain, secure: secure});\r\n    }\r\n}\r\n\r\n/**\r\n * 表单方法集合\r\n * @type {{placeholderOff: FormUtil.placeholderOff, placeholderOn: FormUtil.placeholderOn, setPlaceholder: FormUtil.setPlaceholder, placeholderPolyfill: FormUtil.placeholderPolyfill}}\r\n */\r\nlet FormUtil = {\r\n    /**\r\n     * 用于绑定input的placeholder事件\r\n     * @example inputElem.forEach(FormUtil.setPlaceholder)\r\n     * @param el {DOM对象}\r\n     * @version 1.0\r\n     */\r\n    placeholderOff: function (ev) {\r\n        ev.target.val = ev.target.getAttribute(\"placeholder\");\r\n        ev.target.setAttribute(\"placeholder\", \"\");\r\n    },\r\n    placeholderOn: function (ev) {\r\n        ev.target.setAttribute(\"placeholder\", ev.target.val);\r\n    },\r\n    setPlaceholder: function (el) {\r\n        el.onfocus = FormUtil.placeholderOff;\r\n        el.onblur = FormUtil.placeholderOn;\r\n    },\r\n    /**\r\n     * 解决IE9不能使用placeholder的问题，输入想使用placeholder的选择器\r\n     * 设置对应input的标签的placeholder的值即可\r\n     * @depend  jQuery\r\n     * @example placeholderFn(\".input-item\");\r\n     * @param elemName\r\n     * @param css\r\n     */\r\n    placeholderPolyfill: function (elemName, css = {\r\n        \"color\": \"rgb(204, 204, 204)\",\r\n        \"line-height\": \"40px\",\r\n        \"font-size\": \"14px\",\r\n        \"position\": \"absolute\",\r\n        \"display\": \"inline\",\r\n        \"top\": 0,\r\n        \"left\": 50,\r\n        \"z-index\": 2\r\n    }) {\r\n        let inputItem = $(elemName);\r\n        inputItem.each(function (index, element) {\r\n            let placeholder = $(element).find(\"input\").attr(\"placeholder\");\r\n            let txt = $(`<txt>${placeholder}</txt>`);\r\n            txt.css(css);\r\n            $(element).append(txt);\r\n            $(element).find(\"input\").focus(function () {\r\n                txt.text(\"\");\r\n            });\r\n            $(element).find(\"input\").blur(function () {\r\n\r\n                if (!this.value) {\r\n                    txt.text(placeholder);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * 给指定单一元素添加类名的开关\r\n * @param el\r\n * @param className\r\n */\r\nfunction switchClassFn(el, className) {\r\n    let classNameAll = el.className;\r\n    let nameIndex = classNameAll.indexOf(` ${className}`);\r\n    if (nameIndex > -1) {\r\n        classNameAll = classNameAll.replace(` ${className}`, \"\");\r\n    } else {\r\n        classNameAll += ` ${className}`;\r\n    }\r\n    return el.className = classNameAll;\r\n}\r\n\r\n/**\r\n * 清除类名\r\n * @param el\r\n * @param className\r\n */\r\nfunction removeClass(el, className) {\r\n    if (el.classList) {\r\n        el.classList.remove(className);\r\n    } else {\r\n        el.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\r\n    }\r\n\r\n}\r\n\r\n//todo 写一个事件委托的函数\r\n//let DOM = {\r\n//    eventDepute,\r\n//};\r\n\r\n/**\r\n * * 兼容到IE7\r\n * @type {{createXHR: (()), addURLParam: ((url, name?, value?))}}\r\n */\r\nlet AJAXFn = {\r\n    createXHR(){\r\n        if (typeof XMLHttpRequest !== \"undefined\") {\r\n            return new XMLHttpRequest();\r\n        } else if (typeof ActiveXObject !== \"undefined\") {\r\n            if (typeof createXHR.activeXString !== \"undefined\") {\r\n                let versions = [\r\n                        'Msxml2.XMLHTTP.5.0',\r\n                        'Msxml2.XMLHTTP.4.0',\r\n                        'Msxml2.XMLHTTP.3.0',\r\n                        'Msxml2.XMLHTTP',\r\n                        'Microsoft.XMLHTTP'],\r\n                    i,\r\n                    len;\r\n                for (i = 0, len = versions.length; i < len; i++) {\r\n                    try {\r\n                        new ActiveXObject(versions[i]);\r\n                        createXHR.activeXString = versions[i];\r\n                        break;\r\n                    } catch (ex) {\r\n                        //    跳过\r\n                    }\r\n                }\r\n            }\r\n            return new ActiveXObject(createXHR.activeXString);\r\n        } else {\r\n            throw new Error(\"你的浏览器版本太旧，请及时更新！\")\r\n        }\r\n\r\n    },\r\n    addURLParam(url, name, value){\r\n        url += (url.indexOf(\"?\") == -1 ? \"?\" : \"&\");\r\n        url += `${encodeURIComponent(name)}=${encodeURIComponent(value)}`;\r\n        return url;\r\n    }\r\n}\r\n\r\nlet serialize = {\r\n    serializeInput(elArr){\r\n        let len = elArr.length,\r\n            msg = [],\r\n            i;\r\n        for (i = 0; i < len; i++) {\r\n            msg.push(`${encodeURIComponent(elArr[i].name)}=${encodeURIComponent(elArr[i].value)}`);\r\n        }\r\n        return msg.join(\"&\");\r\n    },\r\n    checkForm(){\r\n        let msg = document.querySelector(\".forget>span\");\r\n        if (msg.className === \"warn\"){\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\n\r\n"]}